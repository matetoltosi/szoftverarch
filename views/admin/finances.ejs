<%- include('../partials/header') %>

<h1>Pénzügyi Tételek Kezelése</h1>

<section>
    <h3>Új fizetési kötelezettség kiírása</h3>
    <form action="/admin/finances/assign" method="POST">
        <label>Hallgató Neptun kódja: 
            <input type="text" name="neptunCode" placeholder="pl. ABC123" required>
        </label><br><br>
        
        <label>Megnevezés / Jogcím: 
            <input type="text" name="title" placeholder="pl. Kollégiumi díj - Szeptember" required>
        </label><br><br>
        
        <label>Összeg: 
            <input type="number" name="amount" min="1" required>
        </label>
        <select name="currency">
            <option value="HUF">HUF</option>
            <option value="EUR">EUR</option>
        </select><br><br>
        
        <label>Befizetési határidő: 
            <input type="date" name="dueDate" required>
        </label><br><br>
        
        <button type="submit">Tétel kiírása</button>
    </form>
</section>

<hr>

<section>
    <h3>Legutóbb rögzített tételek</h3>
    <table border="1" cellpadding="5">
        <thead>
            <tr>
                <th>Hallgató</th>
                <th>Jogcím</th>
                <th>Összeg</th>
                <th>Létrehozva</th>
            </tr>
        </thead>
        <tbody>
            <% if (recentFees && recentFees.length > 0) { %>
                <% recentFees.forEach(fee => { %>
                    <tr>
                        <td><%= fee.studentName %> (<%= fee.studentNeptun %>)</td>
                        <td><%= fee.title %></td>
                        <td><%= fee.amount %> <%= fee.currency %></td>
                        <td><%= fee.createdAt.toLocaleDateString() %></td>
                    </tr>
                <% }) %>
            <% } else { %>
                <tr><td colspan="4">Nincs nemrég rögzített tétel.</td></tr>
            <% } %>
        </tbody>
    </table>
</section>

<%- include('../partials/footer') %>