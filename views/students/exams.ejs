<%- include('../partials/header', { title: 'Vizsgajelentkezés' })  %>

<h1>Vizsgajelentkezés</h1>

<h3>Elérhető vizsgaalkalmak</h3>

<table border="1" cellpadding="5">
    <thead>
        <tr>
            <th>Tantárgy</th>
            <th>Vizsga Dátuma</th>
            <th>Idősáv</th>
            <th>Terem</th>
            <th>Jelentkezők / Helyek</th>
            <th>Művelet</th>
        </tr>
    </thead>
    <tbody>
        <% availableExams.forEach(exam => { %>
            <tr>
                <td><%= exam.course.subject.name %></td>
                <td><%= exam.date.toLocaleDateString() %></td>
                <td><%= exam.startTime %> - <%= exam.endTime %></td>
                <td><%= exam.room.name %></td>
                <td><%= exam.currentHeadcount %> / <%= exam.maxHeadcount %></td>
                <td>
                    <form action="/api/v1/exams/<%= exam._id %>/register" method="POST">
                        <button type="submit">Jelentkezés</button>
                    </form>
                </td>
            </tr>
        <% }) %>
    </tbody>
</table>

<h3>Felvett vizsgáim</h3>
<ul>
    <% myExams.forEach(registration => { %>
        <li>
            <strong><%= registration.exam.course.subject.name %></strong> - 
            <%= registration.exam.date.toLocaleDateString() %> 
            (<%= registration.exam.startTime %>)
            <form action="/api/v1/exams/<%= registration.exam._id %>/unregister" method="POST" style="display:inline;">
                <button type="submit">Leiratkozás</button>
            </form>
        </li>
    <% }) %>
</ul>

<%- include('../partials/footer') %>

